{"ast":null,"code":"var _jsxFileName = \"/Users/Oiver/React-Decode/DecodeApp/src/ConstructionAreasUpcoming.js\";\nimport React from \"react\";\nimport { GeoJSON } from \"react-leaflet\"; // https://opendata.vancouver.ca/api/records/1.0/search/?dataset=road-ahead-projects-under-construction&facet=comp_date\n\nexport default class ConstructionAreasUpcoming extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.onMouseOut = e => {\n      console.log(\"onMouseOut\", e);\n    };\n\n    this.onMouseOver = e => {\n      console.log(\"onMouseOver\", e.layer.feature.properties.name);\n    };\n\n    this.onClick = e => {\n      console.log(\"onClick\", e);\n    };\n\n    this.state = {\n      geojson: undefined\n    };\n  }\n\n  componentDidMount() {\n    // fetch('https://opendata.vancouver.ca/api/records/1.0/search/?dataset=road-ahead-projects-under-construction&q=comp_date+%3C+2020&rows=50')\n    // fetch('https://opendata.vancouver.ca/api/records/1.0/search/?dataset=road-ahead-current-road-closures&rows=50&facet=comp_date')\n    fetch('https://opendata.vancouver.ca/api/records/1.0/search/?dataset=road-ahead-upcoming-projects&rows=150&facet=comp_date') // fetch('https://opendata.vancouver.ca/api/records/1.0/search/?dataset=road-ahead-projects-under-construction&facet=comp_date') // shows 10 rows of data\n    .then(res => res.json()).then(data => {\n      this.setState({\n        geojson: data\n      });\n    }).catch(console.log);\n  }\n\n  render() {\n    let features = [];\n\n    if (this.state.geojson) {\n      // console.log(this.state.geojson);\n      for (let i = 0; i < this.state.geojson.records.length; i++) {\n        let feature = {\n          \"type\": \"Feature\",\n          \"geometry\": this.state.geojson.records[i].fields.geom,\n          \"properties\": {\n            \"name\": this.state.geojson.records[i].fields.project\n          },\n          \"color\": \"purple\"\n        };\n        features.push(feature);\n      }\n    }\n\n    let featuresObj = {\n      \"type\": \"FeatureCollection\",\n      \"features\": features\n    };\n    return this.state.geojson ? React.createElement(GeoJSON, {\n      data: featuresObj,\n      color: \"purple\",\n      onMouseOver: this.onMouseOver.bind(this),\n      onMouseOut: this.onMouseOut.bind(this),\n      onClick: this.onClick.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59\n      },\n      __self: this\n    }) : null;\n  }\n\n}","map":{"version":3,"sources":["/Users/Oiver/React-Decode/DecodeApp/src/ConstructionAreasUpcoming.js"],"names":["React","GeoJSON","ConstructionAreasUpcoming","Component","constructor","props","onMouseOut","e","console","log","onMouseOver","layer","feature","properties","name","onClick","state","geojson","undefined","componentDidMount","fetch","then","res","json","data","setState","catch","render","features","i","records","length","fields","geom","project","push","featuresObj","bind"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,OAAT,QAAwB,eAAxB,C,CAEA;;AAEA,eAAe,MAAMC,yBAAN,SAAwCF,KAAK,CAACG,SAA9C,CAAwD;AACtEC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;;AADiB,SAmBnBC,UAnBmB,GAmBLC,CAAD,IAAO;AAChBC,MAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ,EAA0BF,CAA1B;AACH,KArBkB;;AAAA,SAuBnBG,WAvBmB,GAuBJH,CAAD,IAAO;AACjBC,MAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ,EAA2BF,CAAC,CAACI,KAAF,CAAQC,OAAR,CAAgBC,UAAhB,CAA2BC,IAAtD;AACH,KAzBkB;;AAAA,SA2BnBC,OA3BmB,GA2BRR,CAAD,IAAO;AACbC,MAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ,EAAuBF,CAAvB;AACH,KA7BkB;;AAEjB,SAAKS,KAAL,GAAa;AACXC,MAAAA,OAAO,EAAEC;AADE,KAAb;AAGD;;AAEDC,EAAAA,iBAAiB,GAAG;AACjB;AACA;AACAC,IAAAA,KAAK,CAAC,qHAAD,CAAL,CACA;AADA,KAECC,IAFD,CAEMC,GAAG,IAAIA,GAAG,CAACC,IAAJ,EAFb,EAGKF,IAHL,CAGWG,IAAD,IAAU;AACd,WAAKC,QAAL,CAAc;AAAER,QAAAA,OAAO,EAAEO;AAAX,OAAd;AACD,KALL,EAMKE,KANL,CAMWlB,OAAO,CAACC,GANnB;AAOF;;AAcDkB,EAAAA,MAAM,GAAG;AACN,QAAIC,QAAQ,GAAG,EAAf;;AACA,QAAI,KAAKZ,KAAL,CAAWC,OAAf,EAAwB;AACpB;AACA,WAAK,IAAIY,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKb,KAAL,CAAWC,OAAX,CAAmBa,OAAnB,CAA2BC,MAA/C,EAAuDF,CAAC,EAAxD,EAA6D;AACzD,YAAIjB,OAAO,GAAG;AACV,kBAAQ,SADE;AAEV,sBAAY,KAAKI,KAAL,CAAWC,OAAX,CAAmBa,OAAnB,CAA2BD,CAA3B,EAA8BG,MAA9B,CAAqCC,IAFvC;AAGV,wBAAc;AACV,oBAAQ,KAAKjB,KAAL,CAAWC,OAAX,CAAmBa,OAAnB,CAA2BD,CAA3B,EAA8BG,MAA9B,CAAqCE;AADnC,WAHJ;AAMV,mBAAS;AANC,SAAd;AAQAN,QAAAA,QAAQ,CAACO,IAAT,CAAcvB,OAAd;AACH;AACJ;;AACD,QAAIwB,WAAW,GAAG;AACd,cAAQ,mBADM;AAEd,kBAAYR;AAFE,KAAlB;AAID,WAAO,KAAKZ,KAAL,CAAWC,OAAX,GACN,oBAAC,OAAD;AACI,MAAA,IAAI,EAAEmB,WADV;AAEI,MAAA,KAAK,EAAC,QAFV;AAGI,MAAA,WAAW,EAAE,KAAK1B,WAAL,CAAiB2B,IAAjB,CAAsB,IAAtB,CAHjB;AAII,MAAA,UAAU,EAAE,KAAK/B,UAAL,CAAgB+B,IAAhB,CAAqB,IAArB,CAJhB;AAKI,MAAA,OAAO,EAAE,KAAKtB,OAAL,CAAasB,IAAb,CAAkB,IAAlB,CALb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADM,GAQJ,IARH;AASD;;AA7DqE","sourcesContent":["import React from \"react\";\r\nimport { GeoJSON } from \"react-leaflet\";\r\n\r\n// https://opendata.vancouver.ca/api/records/1.0/search/?dataset=road-ahead-projects-under-construction&facet=comp_date\r\n\r\nexport default class ConstructionAreasUpcoming extends React.Component {\r\n constructor(props) {\r\n   super(props);\r\n   this.state = {\r\n     geojson: undefined\r\n   };\r\n }\r\n\r\n componentDidMount() {\r\n    // fetch('https://opendata.vancouver.ca/api/records/1.0/search/?dataset=road-ahead-projects-under-construction&q=comp_date+%3C+2020&rows=50')\r\n    // fetch('https://opendata.vancouver.ca/api/records/1.0/search/?dataset=road-ahead-current-road-closures&rows=50&facet=comp_date')\r\n    fetch('https://opendata.vancouver.ca/api/records/1.0/search/?dataset=road-ahead-upcoming-projects&rows=150&facet=comp_date')\r\n    // fetch('https://opendata.vancouver.ca/api/records/1.0/search/?dataset=road-ahead-projects-under-construction&facet=comp_date') // shows 10 rows of data\r\n    .then(res => res.json())\r\n        .then((data) => {\r\n          this.setState({ geojson: data })\r\n        })\r\n        .catch(console.log)    \r\n }\r\n\r\n onMouseOut = (e) => {\r\n     console.log(\"onMouseOut\", e);\r\n }\r\n\r\n onMouseOver = (e) => {\r\n     console.log(\"onMouseOver\", e.layer.feature.properties.name);\r\n }\r\n\r\n onClick = (e) => {\r\n     console.log(\"onClick\", e);\r\n }\r\n\r\n render() {\r\n    let features = [];\r\n    if (this.state.geojson) {\r\n        // console.log(this.state.geojson);\r\n        for (let i = 0; i < this.state.geojson.records.length; i ++) {\r\n            let feature = {\r\n                \"type\": \"Feature\",\r\n                \"geometry\": this.state.geojson.records[i].fields.geom,\r\n                \"properties\": {\r\n                    \"name\": this.state.geojson.records[i].fields.project,\r\n                },\r\n                \"color\": \"purple\"\r\n            };\r\n            features.push(feature);\r\n        }\r\n    }\r\n    let featuresObj = {\r\n        \"type\": \"FeatureCollection\",\r\n        \"features\": features\r\n    }\r\n   return this.state.geojson ? \r\n    <GeoJSON \r\n        data={featuresObj} \r\n        color=\"purple\" \r\n        onMouseOver={this.onMouseOver.bind(this)} \r\n        onMouseOut={this.onMouseOut.bind(this)}\r\n        onClick={this.onClick.bind(this)}\r\n    /> \r\n    : null;\r\n }\r\n}"]},"metadata":{},"sourceType":"module"}