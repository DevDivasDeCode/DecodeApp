{"ast":null,"code":"var _jsxFileName = \"/Users/Oiver/React-Decode/DecodeApp/src/ConstructionAreas.js\";\nimport React from \"react\";\nimport { GeoJSON } from \"react-leaflet\"; // https://opendata.vancouver.ca/api/records/1.0/search/?dataset=road-ahead-projects-under-construction&facet=comp_date\n\nexport default class ConstructionAreas extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.onMouseOut = e => {\n      console.log(\"onMouseOut\", e);\n    };\n\n    this.onMouseOver = e => {\n      console.log(\"onMouseOver\", e.layer.feature.properties.name);\n    };\n\n    this.onClick = e => {\n      console.log(\"onClick\", e);\n    };\n\n    this.state = {\n      geojson: undefined\n    };\n  }\n\n  componentDidMount() {\n    fetch('https://opendata.vancouver.ca/api/records/1.0/search/?dataset=road-ahead-projects-under-construction&q=comp_date+%3C+2020&rows=50') // fetch('https://opendata.vancouver.ca/api/records/1.0/search/?dataset=road-ahead-current-road-closures&rows=50&facet=comp_date')\n    // fetch('https://opendata.vancouver.ca/api/records/1.0/search/?dataset=road-ahead-upcoming-projects&rows=150&facet=comp_date')\n    // fetch('https://opendata.vancouver.ca/api/records/1.0/search/?dataset=road-ahead-projects-under-construction&facet=comp_date') // shows 10 rows of data\n    .then(res => res.json()).then(data => {\n      this.setState({\n        geojson: data\n      });\n    }).catch(console.log);\n  }\n\n  render() {\n    let features = [];\n\n    if (this.state.geojson) {\n      // console.log(this.state.geojson);\n      for (let i = 0; i < this.state.geojson.records.length; i++) {\n        let feature = {\n          \"type\": \"Feature\",\n          \"geometry\": this.state.geojson.records[i].fields.geom,\n          \"properties\": {\n            \"name\": this.state.geojson.records[i].fields.project\n          },\n          \"color\": \"purple\"\n        };\n        features.push(feature);\n      }\n    }\n\n    let featuresObj = {\n      \"type\": \"FeatureCollection\",\n      \"features\": features\n    };\n    return this.state.geojson ? React.createElement(GeoJSON, {\n      data: featuresObj,\n      color: \"purple\" // onMouseOver={this.onMouseOver.bind(this)}\n      // onMouseOut={this.onMouseOut.bind(this)}\n      ,\n      onClick: this.onClick.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61\n      },\n      __self: this\n    }) : null;\n  }\n\n}","map":{"version":3,"sources":["/Users/Oiver/React-Decode/DecodeApp/src/ConstructionAreas.js"],"names":["React","GeoJSON","ConstructionAreas","Component","constructor","props","onMouseOut","e","console","log","onMouseOver","layer","feature","properties","name","onClick","state","geojson","undefined","componentDidMount","fetch","then","res","json","data","setState","catch","render","features","i","records","length","fields","geom","project","push","featuresObj","bind"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,OAAT,QAAwB,eAAxB,C,CAEA;;AAEA,eAAe,MAAMC,iBAAN,SAAgCF,KAAK,CAACG,SAAtC,CAAgD;AAC3DC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,UAAMA,KAAN;;AADe,SAmBnBC,UAnBmB,GAmBLC,CAAD,IAAO;AAChBC,MAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ,EAA0BF,CAA1B;AACH,KArBkB;;AAAA,SAuBnBG,WAvBmB,GAuBJH,CAAD,IAAO;AACjBC,MAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ,EAA2BF,CAAC,CAACI,KAAF,CAAQC,OAAR,CAAgBC,UAAhB,CAA2BC,IAAtD;AACH,KAzBkB;;AAAA,SA2BnBC,OA3BmB,GA2BRR,CAAD,IAAO;AACbC,MAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ,EAAuBF,CAAvB;AACH,KA7BkB;;AAEf,SAAKS,KAAL,GAAa;AACTC,MAAAA,OAAO,EAAEC;AADA,KAAb;AAGH;;AAEDC,EAAAA,iBAAiB,GAAG;AAChBC,IAAAA,KAAK,CAAC,mIAAD,CAAL,CACA;AACA;AACA;AAHA,KAIKC,IAJL,CAIUC,GAAG,IAAIA,GAAG,CAACC,IAAJ,EAJjB,EAKKF,IALL,CAKWG,IAAD,IAAU;AACZ,WAAKC,QAAL,CAAc;AAAER,QAAAA,OAAO,EAAEO;AAAX,OAAd;AACH,KAPL,EAQKE,KARL,CAQWlB,OAAO,CAACC,GARnB;AASH;;AAgBDkB,EAAAA,MAAM,GAAG;AACL,QAAIC,QAAQ,GAAG,EAAf;;AACA,QAAI,KAAKZ,KAAL,CAAWC,OAAf,EAAwB;AACpB;AACA,WAAK,IAAIY,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKb,KAAL,CAAWC,OAAX,CAAmBa,OAAnB,CAA2BC,MAA/C,EAAuDF,CAAC,EAAxD,EAA6D;AACzD,YAAIjB,OAAO,GAAG;AACV,kBAAQ,SADE;AAEV,sBAAY,KAAKI,KAAL,CAAWC,OAAX,CAAmBa,OAAnB,CAA2BD,CAA3B,EAA8BG,MAA9B,CAAqCC,IAFvC;AAGV,wBAAc;AACV,oBAAQ,KAAKjB,KAAL,CAAWC,OAAX,CAAmBa,OAAnB,CAA2BD,CAA3B,EAA8BG,MAA9B,CAAqCE;AADnC,WAHJ;AAMV,mBAAS;AANC,SAAd;AAQAN,QAAAA,QAAQ,CAACO,IAAT,CAAcvB,OAAd;AACH;AACJ;;AACD,QAAIwB,WAAW,GAAG;AACd,cAAQ,mBADM;AAEd,kBAAYR;AAFE,KAAlB;AAIA,WAAO,KAAKZ,KAAL,CAAWC,OAAX,GACH,oBAAC,OAAD;AACI,MAAA,IAAI,EAAEmB,WADV;AAEI,MAAA,KAAK,EAAC,QAFV,CAGI;AACA;AAJJ;AAKI,MAAA,OAAO,EAAE,KAAKrB,OAAL,CAAasB,IAAb,CAAkB,IAAlB,CALb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADG,GAQD,IARN;AASH;;AA/D0D","sourcesContent":["import React from \"react\";\nimport { GeoJSON } from \"react-leaflet\";\n\n// https://opendata.vancouver.ca/api/records/1.0/search/?dataset=road-ahead-projects-under-construction&facet=comp_date\n\nexport default class ConstructionAreas extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            geojson: undefined\n        };\n    }\n\n    componentDidMount() {\n        fetch('https://opendata.vancouver.ca/api/records/1.0/search/?dataset=road-ahead-projects-under-construction&q=comp_date+%3C+2020&rows=50')\n        // fetch('https://opendata.vancouver.ca/api/records/1.0/search/?dataset=road-ahead-current-road-closures&rows=50&facet=comp_date')\n        // fetch('https://opendata.vancouver.ca/api/records/1.0/search/?dataset=road-ahead-upcoming-projects&rows=150&facet=comp_date')\n        // fetch('https://opendata.vancouver.ca/api/records/1.0/search/?dataset=road-ahead-projects-under-construction&facet=comp_date') // shows 10 rows of data\n            .then(res => res.json())\n            .then((data) => {\n                this.setState({ geojson: data })\n            })\n            .catch(console.log)\n    }\n\n    onMouseOut = (e) => {\n        console.log(\"onMouseOut\", e);\n    }\n\n    onMouseOver = (e) => {\n        console.log(\"onMouseOver\", e.layer.feature.properties.name);\n    }\n\n    onClick = (e) => {\n        console.log(\"onClick\", e);\n    }\n\n\n\n    render() {\n        let features = [];\n        if (this.state.geojson) {\n            // console.log(this.state.geojson);\n            for (let i = 0; i < this.state.geojson.records.length; i ++) {\n                let feature = {\n                    \"type\": \"Feature\",\n                    \"geometry\": this.state.geojson.records[i].fields.geom,\n                    \"properties\": {\n                        \"name\": this.state.geojson.records[i].fields.project,\n                    },\n                    \"color\": \"purple\"\n                };\n                features.push(feature);\n            }\n        }\n        let featuresObj = {\n            \"type\": \"FeatureCollection\",\n            \"features\": features\n        }\n        return this.state.geojson ?\n            <GeoJSON\n                data={featuresObj}\n                color=\"purple\"\n                // onMouseOver={this.onMouseOver.bind(this)}\n                // onMouseOut={this.onMouseOut.bind(this)}\n                onClick={this.onClick.bind(this)}\n            />\n            : null;\n    }\n}"]},"metadata":{},"sourceType":"module"}